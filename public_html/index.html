<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <!-- script src="js/jquery-2.0.3.min.js"></script>
    <script src="js/jquery.cookie.js"></script -->
    <script src="js/karutautil.js"></script>
    <script src="js/utayomi.js"></script>
    <script src="js/board.js"></script>
    <script src="js/recorder.js"></script>
    <script src="js/moon.js"></script>
    <script src="js/etc.js"></script>
    <script src="js/cover.js"></script>
    <script src="js/dialog.js"></script>
    <script src="js/controller.js"></script>
    <script src="js/loader.js"></script>
    <script src="js/splash.js"></script>
    <script src="js/practice1.js"></script>
    <script src="js/result.js"></script>
    <script src="js/kimariji.js"></script>
    <script src="js/usage.js"></script>
    <link rel="stylesheet" media="screen" href="css/reset.css" />
    <link href="css/style.css" rel="stylesheet" type="text/css">
    <link href="css/animation.css" rel="stylesheet" type="text/css">
    <title>百人一首アプリ</title>
  </head>
  <body ontouchmove="scroll.prohibitScroll();" style="-webkit-touch-callout: none; -webkit-user-select: none; padding: 0; text-align: center;">
    <div id="load" class="tateDisplay" style="display: block;">
      <div id="loadBox">
        <span id="loadmsg">Loading...</span>
      </div>
    </div>

    <div id="splash" class="yokoDisplay" style="display: none;">
      <section class="splashScr">
        <h2 id="appli_title">百人一首<br />かるた</h2>

        <div class="btnArea">
          <button type="button" class="splashBtn" id="p1_btn"   >練習する</button>
          <button type="button" class="splashBtn" id="p2_btn" disabled >実戦練習</button>
          <button type="button" class="splashBtn" id="stats_btn" disabled>成績を見る</button>
          <button type="button" class="splashBtn" id="kimariji_btn">決まり字一覧</button>
          <button type="button" class="splashBtn" id="usage_btn">アプリの使い方</button>
        </div>
      </section>
    </div>

    <div id="game" class="yokoDisplay" style="display: none;">
      <section id="gameScr" class="commonScr">
        <div id="gameTop">
          <div id="moonArea"><div id="leftM"></div><div id="rightM"></div></div>

          <div id="utaArea">
            <div id="utaAll">
              <div id="uta1">
                <span id="u11"></span><span id="u12"></span><span id="u13"></span><span id="u14"></span><span id="u15"></span><span id="u16"></span>
              </div>
              <div id="uta2">
                <span id="u21"></span><span id="u22"></span><span id="u23"></span><span id="u24"></span><span id="u25"></span><span id="u26"></span><span id="u27"></span><span id="u28"></span>
              </div>
              <div id="uta3">
                <span id="u31"></span><span id="u32"></span><span id="u33"></span><span id="u34"></span><span id="u35"></span><span id="u36"></span>
              </div>
              <div id="uta4">
                <span id="u41"></span><span id="u42"></span><span id="u43"></span><span id="u44"></span><span id="u45"></span><span id="u46"></span><span id="u47"></span><span id="u48"></span>
              </div>
              <div id="uta5">
                <span id="u51"></span><span id="u52"></span><span id="u53"></span><span id="u54"></span><span id="u55"></span><span id="u56"></span><span id="u57"></span><span id="u58"></span>
              </div>
            </div>
          </div>

          <div id="scoreArea">
            <div id="correctD">
              <span id="correctT">正: </span>
              <span id="correctCount">153</span>
            </div>
            <div id="wrongD">
              <span id="wrongT">誤: </span>
              <span id="wrongCount">12</span>
            </div>
          </div>

        </div>

        <div id="gameRight">
          <div id="nexta_btn"><br />次<br />の<br />陣<br />地<br /></div>
          <div id="jinchiLArea">
            <div id="jinchiLight"></div>
          </div>
          <div id="preva_btn"><br />前<br />の<br />陣<br />地<br /></div>
          <div id="kara_btn" style="display: none;">空札<br />判定</div>
        </div>

        <div id="karutaArea1" class="karutaArea">
          <div id="k100" class="karuta"><div id="k100s"></div></div>
          <div id="k101" class="karuta"><div id="k101s"></div></div>
          <div id="k102" class="karuta"><div id="k102s"></div></div>
          <div id="k103" class="karuta"><div id="k103s"></div></div>
          <div id="k104" class="karuta"><div id="k104s"></div></div>
          <div id="k105" class="karuta"><div id="k105s"></div></div>
          <div id="k106" class="karuta"><div id="k106s"></div></div>
          <div id="k107" class="karuta"><div id="k107s"></div></div>
          <div id="k108" class="karuta"><div id="k108s"></div></div>
          <div id="k109" class="karuta"><div id="k109s"></div></div>

          <div id="k110" class="karuta"><div id="k110s"></div></div>
          <div id="k111" class="karuta"><div id="k111s"></div></div>
          <div id="k112" class="karuta"><div id="k112s"></div></div>
          <div id="k113" class="karuta"><div id="k113s"></div></div>
          <div id="k114" class="karuta"><div id="k114s"></div></div>
          <div id="k115" class="karuta"><div id="k115s"></div></div>
          <div id="k116" class="karuta"><div id="k116s"></div></div>
          <div id="k117" class="karuta"><div id="k117s"></div></div>
          <div id="k118" class="karuta"><div id="k118s"></div></div>
          <div id="k119" class="karuta"><div id="k119s"></div></div>

          <div id="k120" class="karuta"><div id="k120s"></div></div>
          <div id="k121" class="karuta"><div id="k121s"></div></div>
          <div id="k122" class="karuta"><div id="k122s"></div></div>
          <div id="k123" class="karuta"><div id="k123s"></div></div>
          <div id="k124" class="karuta"><div id="k124s"></div></div>
          <div id="k125" class="karuta"><div id="k125s"></div></div>
          <div id="k126" class="karuta"><div id="k126s"></div></div>
          <div id="k127" class="karuta"><div id="k127s"></div></div>
          <div id="k128" class="karuta"><div id="k128s"></div></div>
          <div id="k129" class="karuta"><div id="k129s"></div></div>

          <div id="kf1" style="display: none; left: 18px; top: 35px;"></div>
        </div>

        <div id="karutaArea2" class="karutaArea" style="display: none;">
          <div id="k200" class="karuta"><div id="k200s"></div></div>
          <div id="k201" class="karuta"><div id="k201s"></div></div>
          <div id="k202" class="karuta"><div id="k202s"></div></div>
          <div id="k203" class="karuta"><div id="k203s"></div></div>
          <div id="k204" class="karuta"><div id="k204s"></div></div>
          <div id="k205" class="karuta"><div id="k205s"></div></div>
          <div id="k206" class="karuta"><div id="k206s"></div></div>
          <div id="k207" class="karuta"><div id="k207s"></div></div>
          <div id="k208" class="karuta"><div id="k208s"></div></div>
          <div id="k209" class="karuta"><div id="k209s"></div></div>

          <div id="k210" class="karuta"><div id="k210s"></div></div>
          <div id="k211" class="karuta"><div id="k211s"></div></div>
          <div id="k212" class="karuta"><div id="k212s"></div></div>
          <div id="k213" class="karuta"><div id="k213s"></div></div>
          <div id="k214" class="karuta"><div id="k214s"></div></div>
          <div id="k215" class="karuta"><div id="k215s"></div></div>
          <div id="k216" class="karuta"><div id="k216s"></div></div>
          <div id="k217" class="karuta"><div id="k217s"></div></div>
          <div id="k218" class="karuta"><div id="k218s"></div></div>
          <div id="k219" class="karuta"><div id="k219s"></div></div>

          <div id="k220" class="karuta"><div id="k220s"></div></div>
          <div id="k221" class="karuta"><div id="k221s"></div></div>
          <div id="k222" class="karuta"><div id="k222s"></div></div>
          <div id="k223" class="karuta"><div id="k223s"></div></div>
          <div id="k224" class="karuta"><div id="k224s"></div></div>
          <div id="k225" class="karuta"><div id="k225s"></div></div>
          <div id="k226" class="karuta"><div id="k226s"></div></div>
          <div id="k227" class="karuta"><div id="k227s"></div></div>
          <div id="k228" class="karuta"><div id="k228s"></div></div>
          <div id="k229" class="karuta"><div id="k229s"></div></div>

          <div id="kf2" style="display: none;"></div>
        </div>

        <div id="karutaArea3" class="karutaArea" style="display: none;">
          <div id="k300" class="karuta"><div id="k300s"></div></div>
          <div id="k301" class="karuta"><div id="k301s"></div></div>
          <div id="k302" class="karuta"><div id="k302s"></div></div>
          <div id="k303" class="karuta"><div id="k303s"></div></div>
          <div id="k304" class="karuta"><div id="k304s"></div></div>
          <div id="k305" class="karuta"><div id="k305s"></div></div>
          <div id="k306" class="karuta"><div id="k306s"></div></div>
          <div id="k307" class="karuta"><div id="k307s"></div></div>
          <div id="k308" class="karuta"><div id="k308s"></div></div>
          <div id="k309" class="karuta"><div id="k309s"></div></div>

          <div id="k310" class="karuta"><div id="k310s"></div></div>
          <div id="k311" class="karuta"><div id="k311s"></div></div>
          <div id="k312" class="karuta"><div id="k312s"></div></div>
          <div id="k313" class="karuta"><div id="k313s"></div></div>
          <div id="k314" class="karuta"><div id="k314s"></div></div>
          <div id="k315" class="karuta"><div id="k315s"></div></div>
          <div id="k316" class="karuta"><div id="k316s"></div></div>
          <div id="k317" class="karuta"><div id="k317s"></div></div>
          <div id="k318" class="karuta"><div id="k318s"></div></div>
          <div id="k319" class="karuta"><div id="k319s"></div></div>

          <div id="k320" class="karuta"><div id="k320s"></div></div>
          <div id="k321" class="karuta"><div id="k321s"></div></div>
          <div id="k322" class="karuta"><div id="k322s"></div></div>
          <div id="k323" class="karuta"><div id="k323s"></div></div>
          <div id="k324" class="karuta"><div id="k324s"></div></div>
          <div id="k325" class="karuta"><div id="k325s"></div></div>
          <div id="k326" class="karuta"><div id="k326s"></div></div>
          <div id="k327" class="karuta"><div id="k327s"></div></div>
          <div id="k328" class="karuta"><div id="k328s"></div></div>
          <div id="k329" class="karuta"><div id="k329s"></div></div>

          <div id="kf3" style="display: none;"></div>
        </div>

        <div id="karutaArea4" class="karutaArea" style="display: none;">
          <div id="k400" class="karuta"><div id="k400s"></div></div>
          <div id="k401" class="karuta"><div id="k401s"></div></div>
          <div id="k402" class="karuta"><div id="k402s"></div></div>
          <div id="k403" class="karuta"><div id="k403s"></div></div>
          <div id="k404" class="karuta"><div id="k404s"></div></div>
          <div id="k405" class="karuta"><div id="k405s"></div></div>
          <div id="k406" class="karuta"><div id="k406s"></div></div>
          <div id="k407" class="karuta"><div id="k407s"></div></div>
          <div id="k408" class="karuta"><div id="k408s"></div></div>
          <div id="k409" class="karuta"><div id="k409s"></div></div>

          <div id="k410" class="karuta"><div id="k410s"></div></div>
          <div id="k411" class="karuta"><div id="k411s"></div></div>
          <div id="k412" class="karuta"><div id="k412s"></div></div>
          <div id="k413" class="karuta"><div id="k413s"></div></div>
          <div id="k414" class="karuta"><div id="k414s"></div></div>
          <div id="k415" class="karuta"><div id="k415s"></div></div>
          <div id="k416" class="karuta"><div id="k416s"></div></div>
          <div id="k417" class="karuta"><div id="k417s"></div></div>
          <div id="k418" class="karuta"><div id="k418s"></div></div>
          <div id="k419" class="karuta"><div id="k419s"></div></div>

          <div id="k420" class="karuta"><div id="k420s"></div></div>
          <div id="k421" class="karuta"><div id="k421s"></div></div>
          <div id="k422" class="karuta"><div id="k422s"></div></div>
          <div id="k423" class="karuta"><div id="k423s"></div></div>
          <div id="k424" class="karuta"><div id="k424s"></div></div>
          <div id="k425" class="karuta"><div id="k425s"></div></div>
          <div id="k426" class="karuta"><div id="k426s"></div></div>
          <div id="k427" class="karuta"><div id="k427s"></div></div>
          <div id="k428" class="karuta"><div id="k428s"></div></div>
          <div id="k429" class="karuta"><div id="k429s"></div></div>

          <div id="kf4" style="display: none;"></div>
        </div>
      </section>
    </div>

    <div id="result" class="yokoDisplay" style="display: none;">
      <div class="titleArea">
        <h2 class="title">今回の結果</h2>
        <button type="button" id="rc_btn">結果詳細</button>
      </div>
      <section id="r1Scr" class="lowScr">
        <table class="resultTable"> 
          <tr>
            <th>取れた札数</th>
            <td id="correctTd"></td>
            <td id="correctSTd"></td>
          </tr>
          <tr>
            <th>スルーした空札数</th>
            <td id="throughTd"></td>
            <td id="throughSTd"></td>
          </tr>
          <tr>
            <th>お手つきの回数</th>
            <td id="wrongTd"></td>
            <td id="wrongSTd"></td>
          </tr>
          <tr>
            <th>トータル時間</th>
            <td id="timeTd"></td>
            <td></td>
          </tr>
          <tr>
            <th>平均反応時間</th>
            <td id="resTd"></td>
            <td id="resSTd"></td>
          </tr>
          <tr>
            <th>トータルスコア</th>
            <td></td>
            <td id="totalSTd"></td>
          </tr>
        </table>
        <div id="rBtnArea">
          <button type="button" id="r_retry_btn">もう一度挑戦</button>
          <button type="button" id="r_top_btn">トップへ</button>
        </div>
      </section>
      <section id="r2Scr" class="lowScr" style="display: none;">
        <div class="rDetailTableArea" id="rDetailTableArea">
          <table class="rDetailTable" id="rDetailTable">
            <tr class="titleTr">
              <td class="tds">詠み順</td>
              <td class="tds">結果</td>
              <td class="tdl">反応時間</td>
              <td class="tds">歌番号</td>
            </tr>
<!--
            <tr class="rw"><td>1</td><td>正解</td><td>2.145秒</td><td>1番</td></tr>
            <tr class="rw"><td class="utatd" colspan="4">秋の田の刈り穂の庵の苫を荒み 我が衣では露に濡れつつ</td> </tr>
-->
          </table>
        </div>
      </section>
    </div>

    <div id="stats" class="yokoDisplay" style="display: none;">
      <section id="stats1Scr" class="commonScr">
      </section>
      <section id="stats2Scr" class="commonScr" style="display: none;">
      </section>
    </div>

    <div id="kimariji" class="yokoDisplay" style="display: none;">
      <section id="kListScr" class="commonScr">
        <div id="kTabArea">
          <table id="kTabTable">
            <tr><td id="aTab">あ行</td></tr>
            <tr><td id="kTab">か行</td></tr>
            <tr><td id="sTab">さ行</td></tr>
            <tr><td id="tTab">た行</td></tr>
            <tr><td id="nTab">な行</td></tr>
            <tr><td id="hTab">は行</td></tr>
            <tr><td id="mTab">ま行</td></tr>
            <tr><td id="yTab">や行</td></tr>
            <tr><td id="wTab">わ行</td></tr>
          </table>
        </div>
        <div id="kListArea">
          <table id="kList">
          </table>
        </div>
      </section>
      <section id="kDetailScr" class="tateScr">
        <div id="kDetail1"></div>
        <div id="kDetail2"></div>
      </section>
    </div>

    <div id="usage" class="tateDisplay" style="display: none;">
      <section id="u1Scr">
        <p>このアプリでは、2種類のかるた練習モードと、決まり字を確認できる「決まり字一覧」が利用できます。</p>
        <p>１．練習する<br />画面に表示される（詠まれていく）百人一首の歌を、100枚の取り札から選んでいく練習をします。</p>
        <p>２．実戦練習<br />自陣のかるた25枚、敵陣のかるたが逆向きに25枚並んでいる中から、画面に表示される歌を選んでいく練習をします。</p>
        <p>３．決まり字一覧<br />百人一首の決まり字一覧を見られます。</p>
        <p>・その他<br />不具合、ご要望については、<br />makki.katsutoshi@gmail.com<br />までご連絡下さい。</p>
      </section>
      <section id="u2Scr" style="display: none;">
        <p>
          【練習する】<br />画面に表示される（詠まれていく）百人一首の歌を、100枚の取り札から選んでいく練習をします。<br />
          取り札は、下の句が<br />
          1. あ行で始まるもの<br />
          2. か・さ行で始まるもの<br />
          3. た・な・は行で始まるもの<br />
          4. ま・や・わ行で始まるもの<br />
          の4つの陣地に分かれて、50音順に並んでいます。
        </p>
        <p>
          ・練習開始<br />
          陣地の取り札のどれかにたっちすると歌詠みが始まります。
        </p>
      </section>
      <section id="u3Scr" style="display: none;">
        <p>
          【実戦練習】<br />自陣のかるた25枚、敵陣のかるたが逆向きに25枚並んでいる中から、画面に表示される歌を選んでいく練習をします。
        </p>
        <p>
          ・練習開始前に<br />
        </p>
        <p>
          ・タイムボーナスについて<br />
        </p>
        <p>
          ・お手つきについて<br />
        </p>
      </section>
      <section id="u4Scr" style="display: none;">
        <p>
          【決まり字一覧】<br />上の句の五十音順に決まり字が表示された一覧です。
        </p>
      </section>

      <div class="btnArea">
        <button type="button" class="usageBtn" id="uprev_btn">←</button>
        <button type="button" class="usageBtn" id="utop_btn">トップへ</button>
        <button type="button" class="usageBtn" id="unext_btn">→</button>
      </div>
    </div>

    <div id="cover" style="display: block; width: 100%; height: 100%; position: fixed; left: 0; top: 0; z-index: 101; background: rgba(0, 0, 0, 1); ">
      <div id="dialog" style="display: none;">
        <div id="dMsgArea">
          <p id="dMsg">お手つき！<br />第98番 作者は従二位家隆<br />(じゅうにいいえたか)です。</p>
        </div><div class="dBtnArea">
          <button type="button" id="d1_btn">次へ進む</button>
          <button type="button" id="d2_btn">正解を確認する</button>
        </div>
      </div>
    </div>

    <script>
/*
    window.onerror = function (message, url, line) {
      alert(message + '\n' +
            url + ':' + line);
      return true;
    }
*/
    //ツールバー、アドレスバー消去用
    setTimeout(scrollTo, 0, 0, 1);

    //画面回転時に正しい位置に戻す。
    //$(window).on('orientationchange', function() {
    window.addEventListener('orientationchange', function() {
      window.scrollTo(0,0);
    });

    var adjust_count = 0;
    var same_tate_count = 0;
    var prev_tate = 0;
    adjustLayout();

    var DEBUG = false;
    var controller = new Controller();
    controller.initAndStart();
    </script>
  </body>
</html>
